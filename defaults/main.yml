---
# defaults for MySQL related variables


# users who should be setup to access the server as root
mysql_admin_users: []


##
# Firewall settings
#
# If the host supports the Ubuntu FireWall (UFW), these settings can be used
# to allow access to the MySQL server through the firewall.
##

# Set to "yes" to indicate the firewall should be configured
mysql_firewall: no

# Specify a list of Ansible hosts that should be allowed access
mysql_firewall_allow_hosts: []

# Specify a list of Ansible groups that should be allowed access
mysql_firewall_allow_groups: []



##
# Security settings
##

mysql_force_tls: no



##
# Replication settings
#
# Note: `mysql_server_id` must be UNIQUE when doing replication.
#       Standard installation tasks set `mysql_server_id` to be the last
#       octet of the host's IP address unless the `mysql_server_id` variable
#       is defined.
##
mysql_replication: no
mysql_repl_primary: no
mysql_repl_replica: no
mysql_repl_user: replicant
mysql_repl_password: replicant
mysql_repl_primary_ip: 127.0.0.1
mysql_repl_primary_port: 3306
# this value must be defined elsewhere, there is no valid default value
mysql_repl_primary_inventory_name: ""

# used by the primary
mysql_repl_auto_increment: 1
mysql_repl_increment_offset: 1
mysql_binary_log: "{{ mysql_logdir }}/binary-log"
mysql_expire_logs_days: 5

# used by the replica
mysql_relay_log: "{{ mysql_logdir }}/relay-log"
mysql_relay_log_space_limit: "2G"

# install the optional MySQL replication watchdog script
mysql_repl_watchdog: no

# indicate when the MySQL replication watchdog should run
mysql_repl_watchdog_hour: 16
mysql_repl_watchdog_min: 0
mysql_repl_watchdog_days: "*"

# where the MySQL replication watchdog cron job should send emails to
mysql_repl_watchdog_mailto: root



##
# Standard MySQL settings
#
# These rarely change, but can be if needed
##

mysql_port: 3306
mysql_bind_address: "{% if mysql_repl_primary|bool %}{{ ansible_host }}{% else %}127.0.0.1{% endif %}"
mysql_datadir: /var/lib/mysql
mysql_logdir: /var/log/mysql

mysql_packages:
  - python3-selinux
  - mysql-server
  # - python-mysqldb
  # - python-pymysql
  - python3-pymysql

mysql_service: mysql

mysql_file_conf: /etc/mysql/mysql.conf.d/mysqld.cnf
mysql_pid_file: /var/run/mysqld/mysqld.pid
mysql_socket: /var/run/mysqld/mysqld.sock
mysql_binary: /usr/sbin/mysqld

