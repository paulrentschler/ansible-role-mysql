#
# {{ ansible_managed }}
#
# This file was generated by Ansible for {{ inventory_hostname }}
# Do NOT modify this file by hand!
#
# This file sets the various configuration directives to enable replication
# between databases.
#

[mysqld]
{% if mysql_replication|bool and mysql_repl_primary|bool %}
replicate-same-server-id = 0
auto-increment-increment = {{ mysql_repl_auto_increment }}
auto-increment-offset = {{ mysql_repl_increment_offset }}

log-bin = {{ mysql_binary_log }}
{% if _mysql_version.version.major < 8 %}
expire_logs_days           = {{ mysql_expire_logs_days|default(10) }}
{% else %}
binlog_expire_logs_seconds = {{ mysql_expire_logs_days|default(10) * 24 * 60 * 60 }}
{% endif %}
{% endif %}

{% if mysql_replication|bool and mysql_repl_replica|bool %}
relay-log = {{ mysql_relay_log }}
relay-log-space-limit = {{ mysql_relay_log_space_limit }}
read-only = 1
{% endif %}
